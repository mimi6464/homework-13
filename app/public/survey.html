<!-- GET route to /survey whish should display the suryey page -->
<!DOCTYPE html>
 <html lang="en">
 <head>
 	<meta charset="UTF-8">
 	<title>Friend Finder</title>
 
 	<!-- Latest compiled and minified CSS & JS -->
 	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
 	<script src="https://code.jquery.com/jquery.js"></script>
 	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
 
 </head>
 <body>
 
 	<div class="container">
 		<div class="jumbotron">
 		
<h2>Survey Questions</h2>
 			<hr>
 			<h3>About You</h3>
 			<h4>Name (Required)</h4>
 				<input type="text" name id="name" class="form-control" required>
			<h4>Link to Photo Image (Required)</h4>
				<input type="text" name id="photo" class="form-control" required>
			<hr>
			<h3>
				<strong>Question 1</strong>
			</h3>	
			<h4>Would you cry because it’s over or smile because it happened</h4>
		<select data-placeholder="" class="chosen-select" id="q1">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
				<strong>Question 2</strong>
			</h3>	
			<h4>Do you remember days, or you remember moments</h4>
		<select data-placeholder="" class="chosen-select" id="q2">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
				<strong>Question 3</strong>
			</h3>	
			<h4>do you agree life is what happens to you while you’re busy making other plans</h4>
		<select data-placeholder="" class="chosen-select" id="q3">
	 		<option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 4</strong>
			</h3>	
			<h4>“Do you think Life is really simple, but you insist on making it complicated</h4>
		<select data-placeholder="" class="chosen-select" id="q4">
	 		<option value=""></option>
	        <option value="1">1 (Strongly Disagree)</option>
	        <option value="2">2</option>
	        <option value="3">3</option>
	        <option value="4">4</option>
	        <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 5</strong>
			</h3>	
			<h4>Life is 10 percent what you make it, and 90 percent how you take it</h4>
		<select data-placeholder="" class="chosen-select" id="q5">
	    	<option value=""></option>
	        <option value="1">1 (Strongly Disagree)</option>
	        <option value="2">2</option>
	      	<option value="3">3</option>
	      	<option value="4">4</option>
	      	<option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 6</strong>
			</h3>	
			<h4>You only live once, but if you do it right, once is enough</h4>
		<select data-placeholder="" class="chosen-select" id="q6">
	      	  <option value=""></option>
	          <option value="1">1 (Strongly Disagree)</option>
	          <option value="2">2</option>
	          <option value="3">3</option>
	          <option value="4">4</option>
	          <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 7</strong>
			</h3>	
			<h4>Only a life lived for others is a life worthwhile</h4>
		<select data-placeholder="" class="chosen-select" id="q7">
			  <option value=""></option>
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 8</strong>
			</h3>	
			<h4>In the end, it’s not the years in your life that count. It’s the life in your years.</h4>
		<select data-placeholder="" class="chosen-select" id="q8">
	 		  <option value=""></option>
	          <option value="1">1 (Strongly Disagree)</option>
	          <option value="2">2</option>
	          <option value="3">3</option>
	          <option value="4">4</option>
	          <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 9</strong>
			</h3>	
			<h4>Good looks, good books, and a sleepy conscience: this is the ideal life</h4>
		<select data-placeholder="" class="chosen-select" id="q9">
	 		  <option value=""></option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<hr>
			<h3>
			<strong>Question 10</strong>
			</h3>	
			<h4>My life is my message</h4>
		<select data-placeholder="" class="chosen-select" id="q10">
	 		  <option value=""></option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
      	</select>
      	<br>
      	<br>
      	<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
 Submit</button>
 <hr>
    
      <footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/afhaque/friendfinder">GitHub Repo</a></p>
        </div>
      </footer>

  </div>
<!-- ================================================ -->

<!-- Modal -->
  <div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
        <div class="modal-body">
          <h2 id="matchName"></h2>
          <img id="matchImg" src="http://themadjewess.net/wp-content/uploads/2015/10/bird.jpg">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">
    // Chosen CSS
    var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }
    // for (var selector in config) {
    //   $(selector).chosen(config[selector]);
    // }

    // Capture the form inputs 
    $("#submit").on("click", function(){

      // Form validation
      function validateForm() {
      var isValid = true;
      $('.form-control').each(function() {
        if ( $(this).val() === '' )
            isValid = false;
      });

      $('.chosen-select').each(function() {

        if( $(this).val() === "")
          isValid = false
      })
      return isValid;
    }

    // If all required fields are filled
    if (validateForm() == true)
    {
      // Create an object for the user's data
        var userData = {
          name: $("#name").val(),
          photo: $("#photo").val(),
          scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
        }


        // Grab the URL of the website
        var currentURL = window.location.origin;

        // AJAX post the data to the friends API. 
        $.post(currentURL + "/api/friends", userData, function(data){

          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
          $("#matchName").text(data.name);
          $('#matchImg').attr("src", data.photo);

          // Show the modal with the best match 
          $("#resultsModal").modal('toggle');

        });
    }
    else
    {
      alert("Please fill out all fields before submitting!");
    }
      
      return false;
    });



   </script>

 </body>
 </html>

